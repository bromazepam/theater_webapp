<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="user/fragments/header :: common-header"/>
<body>
<div th:replace="user/fragments/header :: navbar"/>
<div class="container">
    <h3>Podesavanja</h3>
    <div class="row" style="margin-top: 60px;">
        <div class="col-xs-12">
            <!--nav tabs-->
            <ul class="nav nav-tabs">
                <li th:classappend="${classActiveEdit}? 'active'"><a
                        href="#tab-1" data-toggle="tab"><span>Profil</span></a></li>
                <li th:classappend="${classActiveReservations}? 'active'"><a
                        href="#tab-2" data-toggle="tab"><span>Rezervacije</span></a></li>
            </ul>

            <!-- Tab panels -->
            <div class="tab-content">

                <!-- Edit user information -->
                <div class="tab-pane fade" id="tab-1"
                     th:classappend="${classActiveEdit}? 'in active'">
                    <div class="panel-group">
                        <div class="panel panel-default" style="border: none;">
                            <div class="panel-body"
                                 style="background-color: #add8e6; margin-top: 20px;">
                                <div class="alert alert-danger" th:if="${incorrectPassword}">
                                    <strong>Pogrešna šifra!</strong> Molim Vas unesite ispravnu šifru.
                                </div>
                                <div class="alert alert-succss" th:if="${updateSuccess}">
                                    <strong>Uspešno izmenjeno!</strong>
                                </div>
                                <form th:action="@{/updateUserInfo}" method="post">
                                    <input type="hidden" name="id" th:value="${user.id}"/>
                                    <div class="bg-info" th:if="${updateUserInfo}">Informacije o korisniku ažurirane.
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-xs-6">
                                                <label for="firstName">Ime</label> <input
                                                    type="text" class="form-control" id="firstName"
                                                    name="firstName" th:value="${user.firstName}"/>
                                            </div>
                                            <div class="col-xs-6">
                                                <label for="lastName">Prezime</label>
                                                <input type="text"
                                                       class="form-control" id="lastName" name="lastName"
                                                       th:value="${user.lastName}"/>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="userName">Korisničko ime</label><input type="text"
                                                                                           class="form-control"
                                                                                           id="userName" name="username"
                                                                                           th:value="${user.username}"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="currentPassword">Trenutna šifra</label><input
                                            type="password" class="form-control" id="currentPassword"
                                            name="password" th:value="${currentPassword}"/>
                                    </div>
                                    <p style="color: #828282">Unesite trenutnu šifru kako biste izmenili email ili
                                        šifru.</p>
                                    <div class="form-group">
                                        <label for="email">* Email adresa</label><input
                                            type="text" class="form-control" id="email" name="email"
                                            th:value="${user.email}"/>
                                    </div>
                                    <p style="color: #828282">Validna email adresa. Sve
                                        poruke iz sistema biće slate na ovu adresa. Email
                                        adresa nije javna i koristiće se samo ako želite da promenite
                                        Vašu šifru ili primite određena obaveštenja.</p>
                                    <div class="form-group">
                                        <label for="txtNewPassword">Šifra</label>
                                        <span id="checkPasswordMatch" style="color:red;"></span><input
                                            type="password" class="form-control" id="txtNewPassword"
                                            name="newPassword"/>
                                    </div>
                                    <div class="form-group">
                                        <label for="txtConfirmPassword">Potvrdi šifru</label><input
                                            type="password" class="form-control" id="txtConfirmPassword"/>
                                    </div>
                                    <p style="color: #828282">Da biste promenili šifru, unesite šifru u oba polja</p>
                                    <button id="updateUserInfoButton" type="submit" class="btn btn-primary">Sačuvaj
                                        sve
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

<!--                TODO   kada se odradi rezervacija, onda ce moci i da se prikazuje-->
                <!-- Reservation Information -->
<!--                <div class="tab-pane fade" id="tab-2"-->
<!--                     th:classappend="${classActiveReservations}? 'in active'">-->
<!--                    <div class="panel-group">-->
<!--                        <div class="panel panel-default" style="border: none;">-->
<!--                            <div class="panel-body"-->
<!--                                 style="background-color: #ededed; margin-top: 20px;">-->

<!--                                <table class="table table-sm table-inverse">-->
<!--                                    <thead>-->
<!--                                    <tr>-->
<!--                                        <th>Datum rezervacije</th>-->
<!--                                        <th>Broj rezervacija</th>-->
<!--                                        <th>Ukupno</th>-->
<!--                                        <th>Status</th>-->
<!--                                    </tr>-->
<!--                                    </thead>-->
<!--                                    <tbody>-->
<!--                                    <tr th:each="order : ${orderList}">-->
<!--                                        <td><a th:href="@{/orderDetail(id=${order.id})}"><span-->
<!--                                                th:text="${order.orderDate}"></span></a></td>-->
<!--                                        <td data-th-text="${order.id}"></td>-->
<!--                                        <td data-th-text="${order.orderTotal}"></td>-->
<!--                                        <td data-th-text="${order.orderStatus}"></td>-->
<!--                                    </tr>-->
<!--                                    </tbody>-->
<!--                                </table>-->

<!--                                <div th:if="${displayOrderDetail}">-->
<!--                                    <div class="row">-->
<!--                                        <div class="col-xs-12">-->
<!--                                            <div class="text-center">-->
<!--                                                <h2>-->
<!--                                                    Detalji kupovine #<span th:text="${order.id}"></span>-->
<!--                                                </h2>-->
<!--                                            </div>-->
<!--                                            <hr />-->

<!--                                            <div class="row">-->
<!--                                                <div class="col-xs-4">-->
<!--                                                    <div class="panel panel-default height">-->
<!--                                                        <div class="panel-heading">-->
<!--                                                            <strong>Detalji plaćanja</strong>-->
<!--                                                        </div>-->
<!--                                                        <div class="panel-body">-->
<!--																<span-->
<!--                                                                        th:text="${order.billingAddress.billingAddressName}"></span><br />-->
<!--                                                            <span-->
<!--                                                                    th:text="${order.billingAddress.billingAddressStreet1}+' '+${order.billingAddress.billingAddressStreet2}"></span><br />-->
<!--                                                            <span-->
<!--                                                                    th:text="${order.billingAddress.billingAddressCity}"></span><br />-->
<!--                                                            <span-->
<!--                                                                    th:text="${order.billingAddress.billingAddressState}"></span><br />-->
<!--                                                            <span-->
<!--                                                                    th:text="${order.billingAddress.billingAddressZipcode}"></span><br />-->
<!--                                                        </div>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                                <div class="col-xs-4">-->
<!--                                                    <div class="panel panel-default height">-->
<!--                                                        <div class="panel-heading">-->
<!--                                                            <strong>Informacije o plaćanju</strong>-->
<!--                                                        </div>-->
<!--                                                        <div class="panel-body">-->
<!--																<span th:text="${order.payment.holderName}">Naziv-->
<!--																	kartice</span><br /> <span th:text="${order.payment.cardNumber}">Broj-->
<!--																	Kartice</span><br /> <span>Datum isticanja:</span><span-->
<!--                                                                th:text="${order.payment.expiryMonth}"></span>/<span-->
<!--                                                                th:text="${order.payment.expiryYear}"></span><br />-->
<!--                                                        </div>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                                <div class="col-xs-4">-->
<!--                                                    <div class="panel panel-default height">-->
<!--                                                        <div class="panel-heading">-->
<!--                                                            <strong>Detalji slanja</strong>-->
<!--                                                        </div>-->
<!--                                                        <div class="panel-body">-->
<!--																<span-->
<!--                                                                        th:text="${order.shippingAddress.shippingAddressName}"></span><br />-->
<!--                                                            <span-->
<!--                                                                    th:text="${order.shippingAddress.shippingAddressStreet1}+' '+${order.shippingAddress.shippingAddressStreet2}"></span><br />-->
<!--                                                            <span-->
<!--                                                                    th:text="${order.shippingAddress.shippingAddressCity}"></span><br />-->
<!--                                                            <span-->
<!--                                                                    th:text="${order.shippingAddress.shippingAddressState}"></span><br />-->
<!--                                                            <span-->
<!--                                                                    th:text="${order.shippingAddress.shippingAddressZipcode}"></span><br />-->
<!--                                                        </div>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    <div class="row">-->
<!--                                        <div class="col-md-12">-->
<!--                                            <div class="panel-heading">-->
<!--                                                <h3 class="text-center">-->
<!--                                                    <strong>Račun kupovine</strong>-->
<!--                                                </h3>-->
<!--                                            </div>-->
<!--                                            <div class="panel-body">-->
<!--                                                <div class="table-responsive">-->
<!--                                                    <table class="table table-condensed">-->
<!--                                                        <thead>-->
<!--                                                        <tr>-->
<!--                                                            <td><strong>Naziv artikla</strong></td>-->
<!--                                                            <td class="text-center"><strong>Cena-->
<!--                                                            </strong></td>-->
<!--                                                            <td class="text-center"><strong>-->
<!--                                                                Količina</strong></td>-->
<!--                                                            <td class="text-right"><strong>Ukupno</strong></td>-->
<!--                                                        </tr>-->
<!--                                                        </thead>-->
<!--                                                        <tbody>-->
<!--                                                        <tr th:each="cartItem : ${cartItemList}">-->
<!--                                                            <td data-th-text="${cartItem.book.title}"></td>-->
<!--                                                            <td class="text-center"-->
<!--                                                                data-th-text="${cartItem.book.ourPrice}"></td>-->
<!--                                                            <td class="text-center" data-th-text="${cartItem.qty}"></td>-->
<!--                                                            <td class="text-center"-->
<!--                                                                data-th-text="${cartItem.subtotal}"></td>-->
<!--                                                        </tr>-->
<!--                                                        <tr>-->
<!--                                                            <td class="highrow"></td>-->
<!--                                                            <td class="highrow"></td>-->
<!--                                                            <td class="highrow text-center"><strong>Cena bez pdv-a</strong></td>-->
<!--                                                            <td class="highrow text-right"-->
<!--                                                                data-th-text="${order.orderTotal}"></td>-->
<!--                                                        </tr>-->
<!--                                                        <tr>-->
<!--                                                            <td class="emptyrow"></td>-->
<!--                                                            <td class="emptyrow"></td>-->
<!--                                                            <td class="emptyrow text-center"><strong>PDV</strong></td>-->
<!--                                                            <td class="emptyrow text-right"-->
<!--                                                                data-th-text="${#numbers.formatDecimal(order.orderTotal*0.06,0,2)}"></td>-->
<!--                                                        </tr>-->
<!--                                                        <tr>-->
<!--                                                            <td class="emptyrow"><i-->
<!--                                                                    class="fa fa-barcode iconbig"></i></td>-->
<!--                                                            <td class="emptyrow"></td>-->
<!--                                                            <td class="emptyrow text-center"><strong>Ukupno</strong></td>-->
<!--                                                            <td-->
<!--                                                                    th:with="total=${order.orderTotal+order.orderTotal*0.06}"-->
<!--                                                                    data-th-text="${#numbers.formatDecimal(total, 0, 2)}"-->
<!--                                                                    class="emptyrow text-right"></td>-->
<!--                                                        </tr>-->
<!--                                                        </tbody>-->
<!--                                                    </table>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

            </div>
            <div th:replace="user/fragments/header :: footer"/>

            <div th:replace="user/fragments/header :: body-bottom-scripts"/>
</body>
</html>